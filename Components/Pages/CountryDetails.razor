@page "/country/{CountryName}"
@inject CA1_Nicolai_deGroot.Services.CountryService CountryService
@inject CA1_Nicolai_deGroot.Services.WikipediaService WikipediaService


@if (country == null && countryExtract == null)
{
    <p>Loading country info...</p>
}
else
{
    <h4>@country?.Name.Common</h4>
    <div class="details">
        <p><strong>Capital city:</strong> @string.Join(", ", country?.Capital ?? new List<string>())</p>
        <p><strong>Population:</strong> @country?.Population.ToString("N0")</p>
        <p><strong>Region:</strong> @country?.Region</p>
    </div>
    @if (country?.Flags != null)
    {
        <img src="@country.Flags.Png" alt="Flag of @country.Name.Common" width="200" class="page_flag" />
    }
    <div class="WikiDetails">
    <h5>Wikipedia Info:</h5>
    <p>@countryExtract.</p>
    </div>
}

@code {
    [Parameter]
    public string? CountryName { get; set; }

    private CA1_Nicolai_deGroot.Services.Country? country;
    private string? countryExtract;

    protected override async Task OnInitializedAsync()
    {
        if (!string.IsNullOrEmpty(CountryName))
        {
            country = await CountryService.GetCountryAsync(CountryName);
            countryExtract = await WikipediaService.GetCountryExtractAsync(CountryName);
            
        }

    }

}

<style>

    body {
        background: #000000;
        background: linear-gradient(180deg,rgba(0, 0, 0, 1) 0%, rgba(150, 35, 35, 1) 100%);
    }

    h4 {
        text-align: center;
        background-color:black;
        color: white;
        padding: 1rem;
        border: 1px solid red;
    }

    .details {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        background-color: black;
        color: white;
        text-align: center;
        padding-top: 1rem;
        border: 1px solid red;
        padding-left: .5rem;
    }

    .details p:nth-of-type(1) {
        grid-column: 1; 
    }


    .details p:nth-of-type(2) {
        grid-column: 2; 
    }

    .details p:nth-of-type(3) {
        grid-column: 3; 
    }

    img {
        margin: 0 auto;
        width: 10rem;
    }


    .page_flag {
        display: block; 
        margin: 1rem auto; 
        width: 15rem; 
        height: auto;
    }

    .WikiDetails {
        background-color: black;
        color: white;
        padding: 1rem;
        border: 1px solid red;
    }


</style>